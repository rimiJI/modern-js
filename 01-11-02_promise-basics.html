<!-- 프라미스 promise ! JS의 약속! -->
<head>
  <title>promise-basics</title>
  <style>
    pre {
      /* 2. '프리텐다드'를 가장 먼저 사용하도록 설정합니다. */
      font-family: "Pretendard", -apple-system, BlinkMacSystemFont, "Segoe UI",
        Roboto, "Helvetica Neue", Arial, sans-serif;
      font-size: 16px; /* 기본 폰트 크기를 살짝 키워 가독성을 높입니다. */
      line-height: 1.6; /* 줄 간격을 넓혀서 덜 답답하게 만듭니다. */
      background-color: #f7f7f7; /* 아주 연한 회색 배경을 추가해 영역을 구분합니다. */
      padding: 1em; /* 안쪽 여백을 줍니다. */
      border-radius: 8px; /* 모서리를 둥글게 만듭니다. */
    }
    .red {
      color: red;
      font-weight: bold;
    }
    .ml-1 {
      margin-left: 1em;
    }
  </style>
  <!-- 1. Prism.js의 CSS 파일을 불러옵니다 (기본 밝은 테마) -->
  <link
    href="https://cdn.jsdelivr.net/npm/prismjs@1.30.0/themes/prism.min.css"
    rel="stylesheet"
  />
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.30.0/prism.min.js"></script>
</head>
<body>
  <h3 style="color: rgb(172, 172, 172)">promise-basics</h3>
  <div>
    <details>
      <summary>
        executor는 자동으로 실행되는데 여기서 원하는 일이 처리됩니다.<br />
        처리가 끝나면 executor는 처리 성공 여부에 따라 resolve나 reject를 호출
      </summary>
      <pre><code class="language-javascript">
        let promise = new Promise(function(resolve, reject) {
              // executor (제작 코드, '가수')}
              );</code></pre>
    </details>

    <details>
      <summary>
        프라미스는 간결하게 호출하기 위한 목록 리스트라고 보면 됨.<br />
        단, 해결하다,거절하다 버튼이 들어있는.
      </summary>
      <pre>
<code class="language-javascript">
    let promise = new Promise(function(resolve, reject) {
      // executor 함수
    });
    //-----------------------------------------------
     let promise = new Promise(function(resolve, reject) {
      let success = true;
      
      if (success) {
        resolve("성공했어요!");   // 성공 신호
      } else {
        reject("실패했어요!");    // 실패 신호
      }
    });
    
    promise.then(
      result => console.log(result), // 성공 시 실행
      error => console.log(error)    // 실패 시 실행
    );
    
</code>
</pre>
    </details>
    <details>
      <summary>
        즉, resolve 와 reject는 내가 만드는 게 아니라, 자바스크립트 엔진이
        만들어서 executor에 “여기 있어, 필요하면 써” 하고 전달해주는
        콜백인가요??
      </summary>
      <pre>YES<br>new Promise(...) 안에 들어가는 함수 → 이걸 executor(실행자) 라고 불러요.<br>
자바스크립트가 이 executor를 호출할 때, 자동으로 두 개의 함수를 넘겨줘요:<br>
resolve: 일이 성공적으로 끝났을 때 부르는 함수<br>
reject: 일이 실패했을 때 부르는 함수</pre>
    </details>

    <details>
      <summary>핵심 요약</summary>
      <pre>
        executor 안의 코드는 내가 작성하는 부분
        resolve / reject는 자바스크립트가 주는 버튼 같은 것
        성공이면 resolve 버튼 누름
        실패면 reject 버튼 누름
        그러면 그 결과를 .then이나 .catch에서 받을 수 있음
      </pre>
    </details>

    <details>
      <summary>성공은 then, 실패는 catch로 가는구나</summary>
      <pre>.then .catch</pre>
    </details>

    <details>
      <summary>Promise 기본 구조</summary>
      <pre>
    ● new Promise((resolve, reject) => {...}) 구조 익힘 <br>
    ●  성공 시 resolve("성공") → .then()으로 감<br>
    ●  실패 시 reject("에러") → .catch()로 감<br>
    </pre>
    </details>

    <details>
      <summary></summary>
      <pre></pre>
    </details>
  </div>

  <script>
    //executor 실행자 , resolve해결 과 reject거절
    let promise1 = new Promise(function (resolve, reject) {
      let success = true;

      if (success) {
        resolve("성공했숨다!"); //성공 신호
      } else {
        reject("실패했숴..."); //실패 신호
      }
    });

    promise1.then(
      (result) => console.log(result), // 성공 시 실행
      (error) => console.log(error) // 실패 시 실행
    );

    // 🍎프라미스는 성공 또는 실패 중 하나만 한다.
    //나머지는 무시됨
    let promise2 = new Promise(function (resolve, rejet) {
      resolve("완료");
      reject(new Error("...")); //무시됨
      setTimeout(() => resolve); //무시됨
    });

    //🍎소비자: then, catch, finally
    //프라미스 객체는 executor와 결과나 에러를 받을
    // -> 소비함수(팬)을 이어주는 역할을 한다.
    //🍊.then
    //프라미스에서 가장 중요하고 기본이되는 메서드
    // promise.then(
    //   function (result) {
    //     /*결과result 다룸*/
    //   },
    //   function (error) {
    //     /*에러error 다룸*/
    //   }
    // );
    let promise = new Promise(function (resolve, reject) {
      setTimeout(() => resolve("완료!"), 1000);
      setTimeout(() => reject(new Error("에러 발생!")), 1000);

      //   //resolve함수는 .then의 첫번째함수(인수)를 실행.
      //   promise.then(
      //     (result) => console.log(rersult), //1초후 "완료!"출력
      //     (error) => console.log(error) //1초 후 "Error: 에러 발생!"을 출력
    });

    //🤖머리아파서 중단하고 GPT학습 미니코드
    //머리 덜 아프게, Promise 기본 5줄짜리 미니 코드 준비했어요.
    // 그냥 따라 치고 실행 결과만 보세요. 원리 깊게 생각 안 해도 됩니다.
    //성공은 .then
    let promise3 = new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve("성공으로 끝났옹");
      }, 1000);
    });
    promise3.then((result) => console.log(result));

    //실패는 .catch
    let promise4 = new Promise((resolve, reject) => {
      setTimeout(() => {
        reject("실패났다!!");
      }, 1000);
    });
    promise4.catch((error) => console.log(error));
  </script>
</body>
